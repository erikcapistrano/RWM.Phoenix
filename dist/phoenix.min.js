/*
Resorts World Manila API v.1.0.4
https://phoenix.rwmanila.com
(c) 2014 by it.appdev@rwmanila.com. All rights reserved.
*/
var CryptoJS = CryptoJS || function (e, t) { var n = {}, r = n.lib = {}, i = function () { }, s = r.Base = { extend: function (e) { i.prototype = this; var t = new i; e && t.mixIn(e); t.hasOwnProperty("init") || (t.init = function () { t.$super.init.apply(this, arguments) }); t.init.prototype = t; t.$super = this; return t }, create: function () { var e = this.extend(); e.init.apply(e, arguments); return e }, init: function () { }, mixIn: function (e) { for (var t in e) { e.hasOwnProperty(t) && (this[t] = e[t]) } e.hasOwnProperty("toString") && (this.toString = e.toString) }, clone: function () { return this.init.prototype.extend(this) } }, o = r.WordArray = s.extend({ init: function (e, n) { e = this.words = e || []; this.sigBytes = n != t ? n : 4 * e.length }, toString: function (e) { return (e || a).stringify(this) }, concat: function (e) { var t = this.words, n = e.words, r = this.sigBytes; e = e.sigBytes; this.clamp(); if (r % 4) { for (var i = 0; i < e; i++) { t[r + i >>> 2] |= (n[i >>> 2] >>> 24 - 8 * (i % 4) & 255) << 24 - 8 * ((r + i) % 4) } } else { if (65535 < n.length) { for (i = 0; i < e; i += 4) { t[r + i >>> 2] = n[i >>> 2] } } else { t.push.apply(t, n) } } this.sigBytes += e; return this }, clamp: function () { var t = this.words, n = this.sigBytes; t[n >>> 2] &= 4294967295 << 32 - 8 * (n % 4); t.length = e.ceil(n / 4) }, clone: function () { var e = s.clone.call(this); e.words = this.words.slice(0); return e }, random: function (t) { for (var n = [], r = 0; r < t; r += 4) { n.push(4294967296 * e.random() | 0) } return new o.init(n, t) } }), u = n.enc = {}, a = u.Hex = { stringify: function (e) { var t = e.words; e = e.sigBytes; for (var n = [], r = 0; r < e; r++) { var i = t[r >>> 2] >>> 24 - 8 * (r % 4) & 255; n.push((i >>> 4).toString(16)); n.push((i & 15).toString(16)) } return n.join("") }, parse: function (e) { for (var t = e.length, n = [], r = 0; r < t; r += 2) { n[r >>> 3] |= parseInt(e.substr(r, 2), 16) << 24 - 4 * (r % 8) } return new o.init(n, t / 2) } }, f = u.Latin1 = { stringify: function (e) { var t = e.words; e = e.sigBytes; for (var n = [], r = 0; r < e; r++) { n.push(String.fromCharCode(t[r >>> 2] >>> 24 - 8 * (r % 4) & 255)) } return n.join("") }, parse: function (e) { for (var t = e.length, n = [], r = 0; r < t; r++) { n[r >>> 2] |= (e.charCodeAt(r) & 255) << 24 - 8 * (r % 4) } return new o.init(n, t) } }, l = u.Utf8 = { stringify: function (e) { try { return decodeURIComponent(escape(f.stringify(e))) } catch (t) { throw Error("Malformed UTF-8 data") } }, parse: function (e) { return f.parse(unescape(encodeURIComponent(e))) } }, c = r.BufferedBlockAlgorithm = s.extend({ reset: function () { this._data = new o.init; this._nDataBytes = 0 }, _append: function (e) { "string" == typeof e && (e = l.parse(e)); this._data.concat(e); this._nDataBytes += e.sigBytes }, _process: function (t) { var n = this._data, r = n.words, i = n.sigBytes, s = this.blockSize, u = i / (4 * s), u = t ? e.ceil(u) : e.max((u | 0) - this._minBufferSize, 0); t = u * s; i = e.min(4 * t, i); if (t) { for (var a = 0; a < t; a += s) { this._doProcessBlock(r, a) } a = r.splice(0, t); n.sigBytes -= i } return new o.init(a, i) }, clone: function () { var e = s.clone.call(this); e._data = this._data.clone(); return e }, _minBufferSize: 0 }); r.Hasher = c.extend({ cfg: s.extend(), init: function (e) { this.cfg = this.cfg.extend(e); this.reset() }, reset: function () { c.reset.call(this); this._doReset() }, update: function (e) { this._append(e); this._process(); return this }, finalize: function (e) { e && this._append(e); return this._doFinalize() }, blockSize: 16, _createHelper: function (e) { return function (t, n) { return (new e.init(n)).finalize(t) } }, _createHmacHelper: function (e) { return function (t, n) { return (new h.HMAC.init(e, n)).finalize(t) } } }); var h = n.algo = {}; return n } (Math); (function (e) { for (var t = CryptoJS, n = t.lib, r = n.WordArray, i = n.Hasher, n = t.algo, s = [], o = [], u = function (e) { return 4294967296 * (e - (e | 0)) | 0 }, a = 2, f = 0; 64 > f; ) { var l; e: { l = a; for (var c = e.sqrt(l), h = 2; h <= c; h++) { if (!(l % h)) { l = !1; break e } } l = !0 } l && (8 > f && (s[f] = u(e.pow(a, .5))), o[f] = u(e.pow(a, 1 / 3)), f++); a++ } var p = [], n = n.SHA256 = i.extend({ _doReset: function () { this._hash = new r.init(s.slice(0)) }, _doProcessBlock: function (e, t) { for (var n = this._hash.words, r = n[0], i = n[1], s = n[2], u = n[3], a = n[4], f = n[5], l = n[6], c = n[7], h = 0; 64 > h; h++) { if (16 > h) { p[h] = e[t + h] | 0 } else { var d = p[h - 15], v = p[h - 2]; p[h] = ((d << 25 | d >>> 7) ^ (d << 14 | d >>> 18) ^ d >>> 3) + p[h - 7] + ((v << 15 | v >>> 17) ^ (v << 13 | v >>> 19) ^ v >>> 10) + p[h - 16] } d = c + ((a << 26 | a >>> 6) ^ (a << 21 | a >>> 11) ^ (a << 7 | a >>> 25)) + (a & f ^ ~a & l) + o[h] + p[h]; v = ((r << 30 | r >>> 2) ^ (r << 19 | r >>> 13) ^ (r << 10 | r >>> 22)) + (r & i ^ r & s ^ i & s); c = l; l = f; f = a; a = u + d | 0; u = s; s = i; i = r; r = d + v | 0 } n[0] = n[0] + r | 0; n[1] = n[1] + i | 0; n[2] = n[2] + s | 0; n[3] = n[3] + u | 0; n[4] = n[4] + a | 0; n[5] = n[5] + f | 0; n[6] = n[6] + l | 0; n[7] = n[7] + c | 0 }, _doFinalize: function () { var t = this._data, n = t.words, r = 8 * this._nDataBytes, i = 8 * t.sigBytes; n[i >>> 5] |= 128 << 24 - i % 32; n[(i + 64 >>> 9 << 4) + 14] = e.floor(r / 4294967296); n[(i + 64 >>> 9 << 4) + 15] = r; t.sigBytes = 4 * n.length; this._process(); return this._hash }, clone: function () { var e = i.clone.call(this); e._hash = this._hash.clone(); return e } }); t.SHA256 = i._createHelper(n); t.HmacSHA256 = i._createHmacHelper(n) })(Math); (function () { var e = CryptoJS, t = e.enc.Utf8; e.algo.HMAC = e.lib.Base.extend({ init: function (e, n) { e = this._hasher = new e.init; "string" == typeof n && (n = t.parse(n)); var r = e.blockSize, i = 4 * r; n.sigBytes > i && (n = e.finalize(n)); n.clamp(); for (var s = this._oKey = n.clone(), o = this._iKey = n.clone(), u = s.words, f = o.words, l = 0; l < r; l++) { u[l] ^= 1549556828, f[l] ^= 909522486 } s.sigBytes = o.sigBytes = i; this.reset() }, reset: function () { var e = this._hasher; e.reset(); e.update(this._iKey) }, update: function (e) { this._hasher.update(e); return this }, finalize: function (e) { var t = this._hasher; e = t.finalize(e); t.reset(); return t.finalize(this._oKey.clone().concat(e)) } }) })(); (function () { var e = CryptoJS, t = e.lib.WordArray; e.enc.Base64 = { stringify: function (e) { var t = e.words, n = e.sigBytes, r = this._map; e.clamp(); e = []; for (var i = 0; i < n; i += 3) { for (var s = (t[i >>> 2] >>> 24 - 8 * (i % 4) & 255) << 16 | (t[i + 1 >>> 2] >>> 24 - 8 * ((i + 1) % 4) & 255) << 8 | t[i + 2 >>> 2] >>> 24 - 8 * ((i + 2) % 4) & 255, o = 0; 4 > o && i + .75 * o < n; o++) { e.push(r.charAt(s >>> 6 * (3 - o) & 63)) } } if (t = r.charAt(64)) { for (; e.length % 4; ) { e.push(t) } } return e.join("") }, parse: function (e) { var n = e.length, r = this._map, i = r.charAt(64); i && (i = e.indexOf(i), -1 != i && (n = i)); for (var i = [], s = 0, o = 0; o < n; o++) { if (o % 4) { var u = r.indexOf(e.charAt(o - 1)) << 2 * (o % 4), f = r.indexOf(e.charAt(o)) >>> 6 - 2 * (o % 4); i[s >>> 2] |= (u | f) << 24 - 8 * (s % 4); s++ } } return t.create(i, s) }, _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="} })(); if (typeof JSON !== "object") { JSON = {} } (function () { function f(e) { return e < 10 ? "0" + e : e } function quote(e) { escapable.lastIndex = 0; return escapable.test(e) ? '"' + e.replace(escapable, function (e) { var t = meta[e]; return typeof t === "string" ? t : "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4) }) + '"' : '"' + e + '"' } function str(e, t) { var n, r, i, s, o = gap, u, a = t[e]; if (a && typeof a === "object" && typeof a.toJSON === "function") { a = a.toJSON(e) } if (typeof rep === "function") { a = rep.call(t, e, a) } switch (typeof a) { case "string": return quote(a); case "number": return isFinite(a) ? String(a) : "null"; case "boolean": case "null": return String(a); case "object": if (!a) { return "null" } gap += indent; u = []; if (Object.prototype.toString.apply(a) === "[object Array]") { s = a.length; for (n = 0; n < s; n += 1) { u[n] = str(n, a) || "null" } i = u.length === 0 ? "[]" : gap ? "[\n" + gap + u.join(",\n" + gap) + "\n" + o + "]" : "[" + u.join(",") + "]"; gap = o; return i } if (rep && typeof rep === "object") { s = rep.length; for (n = 0; n < s; n += 1) { if (typeof rep[n] === "string") { r = rep[n]; i = str(r, a); if (i) { u.push(quote(r) + (gap ? ": " : ":") + i) } } } } else { for (r in a) { if (Object.prototype.hasOwnProperty.call(a, r)) { i = str(r, a); if (i) { u.push(quote(r) + (gap ? ": " : ":") + i) } } } } i = u.length === 0 ? "{}" : gap ? "{\n" + gap + u.join(",\n" + gap) + "\n" + o + "}" : "{" + u.join(",") + "}"; gap = o; return i } } if (typeof Date.prototype.toJSON !== "function") { Date.prototype.toJSON = function (e) { return isFinite(this.valueOf()) ? this.getUTCFullYear() + "-" + f(this.getUTCMonth() + 1) + "-" + f(this.getUTCDate()) + "T" + f(this.getUTCHours()) + ":" + f(this.getUTCMinutes()) + ":" + f(this.getUTCSeconds()) + "Z" : null }; String.prototype.toJSON = Number.prototype.toJSON = Boolean.prototype.toJSON = function (e) { return this.valueOf() } } var cx = /[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, escapable = /[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, gap, indent, meta = { "\b": "\\b", "	": "\\t", "\n": "\\n", "\f": "\\f", "\r": "\\r", '"': '\\"', "\\": "\\\\" }, rep; if (typeof JSON.stringify !== "function") { JSON.stringify = function (e, t, n) { var r; gap = ""; indent = ""; if (typeof n === "number") { for (r = 0; r < n; r += 1) { indent += " " } } else { if (typeof n === "string") { indent = n } } rep = t; if (t && typeof t !== "function" && (typeof t !== "object" || typeof t.length !== "number")) { throw new Error("JSON.stringify") } return str("", { "": e }) } } if (typeof JSON.parse !== "function") { JSON.parse = function (text, reviver) { function walk(e, t) { var n, r, i = e[t]; if (i && typeof i === "object") { for (n in i) { if (Object.prototype.hasOwnProperty.call(i, n)) { r = walk(i, n); if (r !== undefined) { i[n] = r } else { delete i[n] } } } } return reviver.call(e, t, i) } var j; text = String(text); cx.lastIndex = 0; if (cx.test(text)) { text = text.replace(cx, function (e) { return "\\u" + ("0000" + e.charCodeAt(0).toString(16)).slice(-4) }) } if (/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, "@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, "]").replace(/(?:^|:|,)(?:\s*\[)+/g, ""))) { j = eval("(" + text + ")"); return typeof reviver === "function" ? walk({ "": j }, "") : j } throw new SyntaxError("JSON.parse") } } })(); if (!window.console) { (function () { var e = ["log", "debug", "info", "warn", "error", "assert", "dir", "dirxml", "group", "groupEnd", "time", "timeEnd", "count", "trace", "profile", "profileEnd"], t, n = e.length; window.console = {}; for (t = 0; t < n; t++) { window.console[e[t]] = function () { } } })() } (function () { function i() { this._object = e && !r ? new e : new window.ActiveXObject("Microsoft.XMLHTTP"); this._listeners = [] } function s() { return new i } function o(e) { e._object.send(e._data); if (t && !e._async) { e.readyState = s.OPENED; f(e); while (e.readyState < s.DONE) { e.readyState++; u(e); if (e._aborted) { return } } } } function u(e) { if (s.onreadystatechange) { s.onreadystatechange.apply(e) } e.dispatchEvent({ type: "readystatechange", bubbles: false, cancelable: false, timeStamp: new Date + 0 }) } function a(e) { var t = e.responseXML; var r = e.responseText; if (n && r && t && !t.documentElement && e.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)) { t = new window.ActiveXObject("Microsoft.XMLDOM"); t.async = false; t.validateOnParse = false; t.loadXML(r) } if (t) { if (n && t.parseError !== 0 || !t.documentElement || t.documentElement && t.documentElement.tagName == "parsererror") { return null } } return t } function f(e) { try { e.responseText = e._object.responseText } catch (t) { } try { e.responseXML = a(e._object) } catch (t) { } try { e.status = e._object.status } catch (t) { } try { e.statusText = e._object.statusText } catch (t) { } } function l(e) { e._object.onreadystatechange = new window.Function } var e = window.XMLHttpRequest; var t = !!window.controllers; var n = !!window.document.namespaces; var r = n && window.navigator.userAgent.match(/MSIE 7.0/); s.prototype = i.prototype; if (t && e.wrapped) { s.wrapped = e.wrapped } s.UNSENT = 0; s.OPENED = 1; s.HEADERS_RECEIVED = 2; s.LOADING = 3; s.DONE = 4; s.prototype.UNSENT = s.UNSENT; s.prototype.OPENED = s.OPENED; s.prototype.HEADERS_RECEIVED = s.HEADERS_RECEIVED; s.prototype.LOADING = s.LOADING; s.prototype.DONE = s.DONE; s.prototype.readyState = s.UNSENT; s.prototype.responseText = ""; s.prototype.responseXML = null; s.prototype.status = 0; s.prototype.statusText = ""; s.prototype.priority = "NORMAL"; s.prototype.onreadystatechange = null; s.onreadystatechange = null; s.onopen = null; s.onsend = null; s.onabort = null; s.prototype.open = function (e, r, i, o, a) { var p = e.toLowerCase(); if (p == "connect" || p == "trace" || p == "track") { throw new Error(18) } delete this._headers; if (arguments.length < 3) { i = true } this._async = i; var d = this; var v = this.readyState; var m = null; if (n && i) { m = function () { if (v != s.DONE) { l(d); d.abort() } }; window.attachEvent("onunload", m) } if (s.onopen) { s.onopen.apply(this, arguments) } if (arguments.length > 4) { this._object.open(e, r, i, o, a) } else { if (arguments.length > 3) { this._object.open(e, r, i, o) } else { this._object.open(e, r, i) } } this.readyState = s.OPENED; u(this); this._object.onreadystatechange = function () { if (t && !i) { return } d.readyState = d._object.readyState; f(d); if (d._aborted) { d.readyState = s.UNSENT; return } if (d.readyState == s.DONE) { delete d._data; l(d); if (n && i) { window.detachEvent("onunload", m) } if (v != d.readyState) { u(d) } v = d.readyState } } }; s.prototype.send = function (e) { if (s.onsend) { s.onsend.apply(this, arguments) } if (!arguments.length) { e = null } if (e && e.nodeType) { e = window.XMLSerializer ? (new window.XMLSerializer).serializeToString(e) : e.xml; if (!this._headers["Content-Type"]) { this._object.setRequestHeader("Content-Type", "application/xml") } } this._data = e; o(this) }; s.prototype.abort = function () { if (s.onabort) { s.onabort.apply(this, arguments) } if (this.readyState > s.UNSENT) { this._aborted = true } this._object.abort(); l(this); this.readyState = s.UNSENT; delete this._data }; s.prototype.getAllResponseHeaders = function () { return this._object.getAllResponseHeaders() }; s.prototype.getResponseHeader = function (e) { return this._object.getResponseHeader(e) }; s.prototype.setRequestHeader = function (e, t) { if (!this._headers) { this._headers = {} } this._headers[e] = t; return this._object.setRequestHeader(e, t) }; s.prototype.addEventListener = function (e, t, n) { for (var r = 0, i; i = this._listeners[r]; r++) { if (i[0] == e && i[1] == t && i[2] == n) { return } } this._listeners.push([e, t, n]) }; s.prototype.removeEventListener = function (e, t, n) { for (var r = 0, i; i = this._listeners[r]; r++) { if (i[0] == e && i[1] == t && i[2] == n) { break } } if (i) { this._listeners.splice(r, 1) } }; s.prototype.dispatchEvent = function (e) { var t = { type: e.type, target: this, currentTarget: this, eventPhase: 2, bubbles: e.bubbles, cancelable: e.cancelable, timeStamp: e.timeStamp, stopPropagation: function () { }, preventDefault: function () { }, initEvent: function () { } }; if (t.type == "readystatechange" && this.onreadystatechange) { (this.onreadystatechange.handleEvent || this.onreadystatechange).apply(this, [t]) } for (var n = 0, r; r = this._listeners[n]; n++) { if (r[0] == t.type && !r[2]) { (r[1].handleEvent || r[1]).apply(this, [t]) } } }; s.prototype.toString = function () { return "[object XMLHttpRequest]" }; s.toString = function () { return "[XMLHttpRequest]" }; if (!window.Function.prototype.apply) { window.Function.prototype.apply = function (e, t) { if (!t) { t = [] } e.__func = this; e.__func(t[0], t[1], t[2], t[3], t[4]); delete e.__func } } window.XMLHttpRequest = s })(); (function (e, t, n, r, i, s) { function w(e, t) { var n = typeof e[t]; return n == "function" || !!(n == "object" && e[t]) || n == "unknown" } function E(e, t) { return !!(typeof e[t] == "object" && e[t]) } function S(e) { return Object.prototype.toString.call(e) === "[object Array]" } function x() { var e = "Shockwave Flash", t = "application/x-shockwave-flash"; if (!q(navigator.plugins) && typeof navigator.plugins[e] == "object") { var n = navigator.plugins[e].description; if (n && !q(navigator.mimeTypes) && navigator.mimeTypes[t] && navigator.mimeTypes[t].enabledPlugin) { y = n.match(/\d+/g) } } if (!y) { var r; try { r = new ActiveXObject("ShockwaveFlash.ShockwaveFlash"); y = Array.prototype.slice.call(r.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/), 1); r = null } catch (i) { } } if (!y) { return false } var s = parseInt(y[0], 10), o = parseInt(y[1], 10); b = s > 9 && o > 0; return true } function A() { if (C) { return } C = true; for (var e = 0; e < k.length; e++) { k[e]() } k.length = 0 } function M(e, t) { if (C) { e.call(t); return } k.push(function () { e.call(t) }) } function _() { var e = parent; if (h !== "") { for (var t = 0, n = h.split("."); t < n.length; t++) { e = e[n[t]] } } return e.easyXDM } function D(t) { e.easyXDM = d; h = t; if (h) { v = "easyXDM_" + h.replace(".", "_") + "_" } return p } function P(e) { return e.match(f)[3] } function H(e) { return e.match(f)[4] || "" } function B(e) { if (/^file/.test(e)) { throw new Error("The file:// protocol is not supported") } var t = e.toLowerCase().match(f); var n = t[2], r = t[3], i = t[4] || ""; if (n == "http:" && i == ":80" || n == "https:" && i == ":443") { i = "" } return n + "//" + r + i } function j(e) { e = e.replace(c, "$1/"); if (!e.match(/^(http||https):\/\//)) { var t = e.substring(0, 1) === "/" ? "" : n.pathname; if (t.substring(t.length - 1) !== "/") { t = t.substring(0, t.lastIndexOf("/") + 1) } e = n.protocol + "//" + n.host + t + e } while (l.test(e)) { e = e.replace(l, "") } return e } function F(e, t) { var n = "", r = e.indexOf("#"); if (r !== -1) { n = e.substring(r); e = e.substring(0, r) } var i = []; for (var o in t) { if (t.hasOwnProperty(o)) { i.push(o + "=" + s(t[o])) } } return e + (g ? "#" : e.indexOf("?") == -1 ? "?" : "&") + i.join("&") + n } function q(e) { return typeof e === "undefined" } function U(e, t, n) { var r; for (var i in t) { if (t.hasOwnProperty(i)) { if (i in e) { r = t[i]; if (typeof r === "object") { U(e[i], r, n) } else { if (!n) { e[i] = t[i] } } } else { e[i] = t[i] } } } return e } function z() { var e = t.body.appendChild(t.createElement("form")), n = e.appendChild(t.createElement("input")); n.name = v + "TEST" + u; m = n !== e.elements[n.name]; t.body.removeChild(e) } function W(e) { if (q(m)) { z() } var n; if (m) { n = t.createElement('<iframe name="' + e.props.name + '"/>') } else { n = t.createElement("IFRAME"); n.name = e.props.name } n.id = n.name = e.props.name; delete e.props.name; if (typeof e.container == "string") { e.container = t.getElementById(e.container) } if (!e.container) { U(n.style, { position: "absolute", top: "-2000px", left: "0px" }); e.container = t.body } var r = e.props.src; e.props.src = "javascript:false"; U(n, e.props); n.border = n.frameBorder = 0; n.allowTransparency = true; e.container.appendChild(n); if (e.onLoad) { T(n, "load", e.onLoad) } if (e.usePost) { var i = e.container.appendChild(t.createElement("form")), s; i.target = n.name; i.action = r; i.method = "POST"; if (typeof e.usePost === "object") { for (var o in e.usePost) { if (e.usePost.hasOwnProperty(o)) { if (m) { s = t.createElement('<input name="' + o + '"/>') } else { s = t.createElement("INPUT"); s.name = o } s.value = e.usePost[o]; i.appendChild(s) } } } i.submit(); i.parentNode.removeChild(i) } else { n.src = r } e.props.src = r; return n } function X(e, t) { if (typeof e == "string") { e = [e] } var n, r = e.length; while (r--) { n = e[r]; n = new RegExp(n.substr(0, 1) == "^" ? n : "^" + n.replace(/(\*)/g, ".$1").replace(/\?/g, ".") + "$"); if (n.test(t)) { return true } } return false } function V(r) { var i = r.protocol, s; r.isHost = r.isHost || q(I.xdm_p); g = r.hash || false; if (!r.props) { r.props = {} } if (!r.isHost) { r.channel = I.xdm_c.replace(/["'<>\\]/g, ""); r.secret = I.xdm_s; r.remote = I.xdm_e.replace(/["'<>\\]/g, ""); i = I.xdm_p; if (r.acl && !X(r.acl, r.remote)) { throw new Error("Access denied for " + r.remote) } } else { r.remote = j(r.remote); r.channel = r.channel || "default" + u++; r.secret = Math.random().toString(16).substring(2); if (q(i)) { if (B(n.href) == B(r.remote)) { i = "4" } else { if (w(e, "postMessage") || w(t, "postMessage")) { i = "1" } else { if (r.swf && w(e, "ActiveXObject") && x()) { i = "6" } else { if (navigator.product === "Gecko" && "frameElement" in e && navigator.userAgent.indexOf("WebKit") == -1) { i = "5" } else { if (r.remoteHelper) { i = "2" } else { i = "0" } } } } } } } r.protocol = i; switch (i) { case "0": U(r, { interval: 100, delay: 2e3, useResize: true, useParent: false, usePolling: false }, true); if (r.isHost) { if (!r.local) { var o = n.protocol + "//" + n.host, a = t.body.getElementsByTagName("img"), f; var l = a.length; while (l--) { f = a[l]; if (f.src.substring(0, o.length) === o) { r.local = f.src; break } } if (!r.local) { r.local = e } } var c = { xdm_c: r.channel, xdm_p: 0 }; if (r.local === e) { r.usePolling = true; r.useParent = true; r.local = n.protocol + "//" + n.host + n.pathname + n.search; c.xdm_e = r.local; c.xdm_pa = 1 } else { c.xdm_e = j(r.local) } if (r.container) { r.useResize = false; c.xdm_po = 1 } r.remote = F(r.remote, c) } else { U(r, { channel: I.xdm_c, remote: I.xdm_e, useParent: !q(I.xdm_pa), usePolling: !q(I.xdm_po), useResize: r.useParent ? false : r.useResize }) } s = [new p.stack.HashTransport(r), new p.stack.ReliableBehavior({}), new p.stack.QueueBehavior({ encode: true, maxLength: 4e3 - r.remote.length }), new p.stack.VerifyBehavior({ initiate: r.isHost })]; break; case "1": s = [new p.stack.PostMessageTransport(r)]; break; case "2": r.remoteHelper = j(r.remoteHelper); s = [new p.stack.NameTransport(r), new p.stack.QueueBehavior, new p.stack.VerifyBehavior({ initiate: r.isHost })]; break; case "3": s = [new p.stack.NixTransport(r)]; break; case "4": s = [new p.stack.SameOriginTransport(r)]; break; case "5": s = [new p.stack.FrameElementTransport(r)]; break; case "6": if (!y) { x() } s = [new p.stack.FlashTransport(r)]; break } s.push(new p.stack.QueueBehavior({ lazy: r.lazy, remove: true })); return s } function $(e) { var t, n = { incoming: function (e, t) { this.up.incoming(e, t) }, outgoing: function (e, t) { this.down.outgoing(e, t) }, callback: function (e) { this.up.callback(e) }, init: function () { this.down.init() }, destroy: function () { this.down.destroy() } }; for (var r = 0, i = e.length; r < i; r++) { t = e[r]; U(t, n, true); if (r !== 0) { t.down = e[r - 1] } if (r !== i - 1) { t.up = e[r + 1] } } return t } function J(e) { e.up.down = e.down; e.down.up = e.up; e.up = e.down = null } var o = this; var u = Math.floor(Math.random() * 1e4); var a = Function.prototype; var f = /^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/; var l = /[\-\w]+\/\.\.\//; var c = /([^:])\/\//g; var h = ""; var p = {}; var d = e.easyXDM; var v = "easyXDM_"; var m; var g = false; var y; var b; var T, N; if (w(e, "addEventListener")) { T = function (e, t, n) { e.addEventListener(t, n, false) }; N = function (e, t, n) { e.removeEventListener(t, n, false) } } else { if (w(e, "attachEvent")) { T = function (e, t, n) { e.attachEvent("on" + t, n) }; N = function (e, t, n) { e.detachEvent("on" + t, n) } } else { throw new Error("Browser not supported") } } var C = false, k = [], L; if ("readyState" in t) { L = t.readyState; C = L == "complete" || ~navigator.userAgent.indexOf("AppleWebKit/") && (L == "loaded" || L == "interactive") } else { C = !!t.body } if (!C) { if (w(e, "addEventListener")) { T(t, "DOMContentLoaded", A) } else { T(t, "readystatechange", function () { if (t.readyState == "complete") { A() } }); if (t.documentElement.doScroll && e === top) { var O = function () { if (C) { return } try { t.documentElement.doScroll("left") } catch (e) { r(O, 1); return } A() }; O() } } T(e, "load", A) } var I = function (e) { e = e.substring(1).split("&"); var t = {}, n, r = e.length; while (r--) { n = e[r].split("="); t[n[0]] = i(n[1]) } return t } (/xdm_e=/.test(n.search) ? n.search : n.hash); var R = function () { var e = {}; var t = { a: [1, 2, 3] }, n = '{"a":[1,2,3]}'; if (typeof JSON != "undefined" && typeof JSON.stringify === "function" && JSON.stringify(t).replace(/\s/g, "") === n) { return JSON } if (Object.toJSON) { if (Object.toJSON(t).replace(/\s/g, "") === n) { e.stringify = Object.toJSON } } if (typeof String.prototype.evalJSON === "function") { t = n.evalJSON(); if (t.a && t.a.length === 3 && t.a[2] === 3) { e.parse = function (e) { return e.evalJSON() } } } if (e.stringify && e.parse) { R = function () { return e }; return e } return null }; U(p, { version: "2.4.17.1", query: I, stack: {}, apply: U, getJSONObject: R, whenReady: M, noConflict: D }); p.DomHelper = { on: T, un: N, requiresJSON: function (n) { if (!E(e, "JSON")) { t.write('<script type="text/javascript" src="' + n + '"></script>') } } }; (function () { var e = {}; p.Fn = { set: function (t, n) { e[t] = n }, get: function (t, n) { var r = e[t]; if (n) { delete e[t] } return r } } })(); p.Socket = function (e) { var t = $(V(e).concat([{ incoming: function (t, n) { e.onMessage(t, n) }, callback: function (t) { if (e.onReady) { e.onReady(t) } } }])), n = B(e.remote); this.origin = B(e.remote); this.destroy = function () { t.destroy() }; this.postMessage = function (e) { t.outgoing(e, n) }; t.init() }; p.Rpc = function (e, t) { if (t.local) { for (var n in t.local) { if (t.local.hasOwnProperty(n)) { var r = t.local[n]; if (typeof r === "function") { t.local[n] = { method: r} } } } } var i = $(V(e).concat([new p.stack.RpcBehavior(this, t), { callback: function (t) { if (e.onReady) { e.onReady(t) } } }])); this.origin = B(e.remote); this.destroy = function () { i.destroy() }; i.init() }; p.stack.SameOriginTransport = function (e) { var t, i, s, o; return t = { outgoing: function (e, t, n) { s(e); if (n) { n() } }, destroy: function () { if (i) { i.parentNode.removeChild(i); i = null } }, onDOMReady: function () { o = B(e.remote); if (e.isHost) { U(e.props, { src: F(e.remote, { xdm_e: n.protocol + "//" + n.host + n.pathname, xdm_c: e.channel, xdm_p: 4 }), name: v + e.channel + "_provider" }); i = W(e); p.Fn.set(e.channel, function (e) { s = e; r(function () { t.up.callback(true) }, 0); return function (e) { t.up.incoming(e, o) } }) } else { s = _().Fn.get(e.channel, true)(function (e) { t.up.incoming(e, o) }); r(function () { t.up.callback(true) }, 0) } }, init: function () { M(t.onDOMReady, t) } } }; p.stack.FlashTransport = function (e) { function c(e, t) { r(function () { i.up.incoming(e, a) }, 0) } function d(n) { var r = e.swf + "?host=" + e.isHost; var i = "easyXDM_swf_" + Math.floor(Math.random() * 1e4); p.Fn.set("flash_loaded" + n.replace(/[\-.]/g, "_"), function () { p.stack.FlashTransport[n].swf = f = l.firstChild; var e = p.stack.FlashTransport[n].queue; for (var t = 0; t < e.length; t++) { e[t]() } e.length = 0 }); if (e.swfContainer) { l = typeof e.swfContainer == "string" ? t.getElementById(e.swfContainer) : e.swfContainer } else { l = t.createElement("div"); U(l.style, b && e.swfNoThrottle ? { height: "20px", width: "20px", position: "fixed", right: 0, top: 0} : { height: "1px", width: "1px", position: "absolute", overflow: "hidden", right: 0, top: 0 }); t.body.appendChild(l) } var s = "callback=flash_loaded" + n.replace(/[\-.]/g, "_") + "&proto=" + o.location.protocol + "&domain=" + P(o.location.href) + "&port=" + H(o.location.href) + "&ns=" + h; l.innerHTML = "<object height='20' width='20' type='application/x-shockwave-flash' id='" + i + "' data='" + r + "'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='" + r + "'></param><param name='flashvars' value='" + s + "'></param><embed type='application/x-shockwave-flash' FlashVars='" + s + "' allowScriptAccess='always' wmode='transparent' src='" + r + "' height='1' width='1'></embed></object>" } var i, s, u, a, f, l; return i = { outgoing: function (t, n, r) { f.postMessage(e.channel, t.toString()); if (r) { r() } }, destroy: function () { try { f.destroyChannel(e.channel) } catch (t) { } f = null; if (s) { s.parentNode.removeChild(s); s = null } }, onDOMReady: function () { a = e.remote; p.Fn.set("flash_" + e.channel + "_init", function () { r(function () { i.up.callback(true) }) }); p.Fn.set("flash_" + e.channel + "_onMessage", c); e.swf = j(e.swf); var t = P(e.swf); var o = function () { p.stack.FlashTransport[t].init = true; f = p.stack.FlashTransport[t].swf; f.createChannel(e.channel, e.secret, B(e.remote), e.isHost); if (e.isHost) { if (b && e.swfNoThrottle) { U(e.props, { position: "fixed", right: 0, top: 0, height: "20px", width: "20px" }) } U(e.props, { src: F(e.remote, { xdm_e: B(n.href), xdm_c: e.channel, xdm_p: 6, xdm_s: e.secret }), name: v + e.channel + "_provider" }); s = W(e) } }; if (p.stack.FlashTransport[t] && p.stack.FlashTransport[t].init) { o() } else { if (!p.stack.FlashTransport[t]) { p.stack.FlashTransport[t] = { queue: [o] }; d(t) } else { p.stack.FlashTransport[t].queue.push(o) } } }, init: function () { M(i.onDOMReady, i) } } }; p.stack.PostMessageTransport = function (t) { function a(e) { if (e.origin) { return B(e.origin) } if (e.uri) { return B(e.uri) } if (e.domain) { return n.protocol + "//" + e.domain } throw "Unable to retrieve the origin of the event" } function f(e) { var n = a(e); if (n == u && e.data.substring(0, t.channel.length + 1) == t.channel + " ") { i.up.incoming(e.data.substring(t.channel.length + 1), n) } } var i, s, o, u; return i = { outgoing: function (e, n, r) { o.postMessage(t.channel + " " + e, n || u); if (r) { r() } }, destroy: function () { N(e, "message", f); if (s) { o = null; s.parentNode.removeChild(s); s = null } }, onDOMReady: function () { u = B(t.remote); if (t.isHost) { var a = function (n) { if (n.data == t.channel + "-ready") { o = "postMessage" in s.contentWindow ? s.contentWindow : s.contentWindow.document; N(e, "message", a); T(e, "message", f); r(function () { i.up.callback(true) }, 0) } }; T(e, "message", a); U(t.props, { src: F(t.remote, { xdm_e: B(n.href), xdm_c: t.channel, xdm_p: 1 }), name: v + t.channel + "_provider" }); s = W(t) } else { T(e, "message", f); o = "postMessage" in e.parent ? e.parent : e.parent.document; o.postMessage(t.channel + "-ready", u); r(function () { i.up.callback(true) }, 0) } }, init: function () { M(i.onDOMReady, i) } } }; p.stack.FrameElementTransport = function (i) { var s, o, u, a; return s = { outgoing: function (e, t, n) { u.call(this, e); if (n) { n() } }, destroy: function () { if (o) { o.parentNode.removeChild(o); o = null } }, onDOMReady: function () { a = B(i.remote); if (i.isHost) { U(i.props, { src: F(i.remote, { xdm_e: B(n.href), xdm_c: i.channel, xdm_p: 5 }), name: v + i.channel + "_provider" }); o = W(i); o.fn = function (e) { delete o.fn; u = e; r(function () { s.up.callback(true) }, 0); return function (e) { s.up.incoming(e, a) } } } else { if (t.referrer && B(t.referrer) != I.xdm_e) { e.top.location = I.xdm_e } u = e.frameElement.fn(function (e) { s.up.incoming(e, a) }); s.up.callback(true) } }, init: function () { M(s.onDOMReady, s) } } }; p.stack.NameTransport = function (e) { function l(t) { var r = e.remoteHelper + (n ? "#_3" : "#_2") + e.channel; i.contentWindow.sendMessage(t, r) } function c() { if (n) { if (++o === 2 || !n) { t.up.callback(true) } } else { l("ready"); t.up.callback(true) } } function h(e) { t.up.incoming(e, a) } function d() { if (u) { r(function () { u(true) }, 0) } } var t; var n, i, s, o, u, a, f; return t = { outgoing: function (e, t, n) { u = n; l(e) }, destroy: function () { i.parentNode.removeChild(i); i = null; if (n) { s.parentNode.removeChild(s); s = null } }, onDOMReady: function () { n = e.isHost; o = 0; a = B(e.remote); e.local = j(e.local); if (n) { p.Fn.set(e.channel, function (t) { if (n && t === "ready") { p.Fn.set(e.channel, h); c() } }); f = F(e.remote, { xdm_e: e.local, xdm_c: e.channel, xdm_p: 2 }); U(e.props, { src: f + "#" + e.channel, name: v + e.channel + "_provider" }); s = W(e) } else { e.remoteHelper = e.remote; p.Fn.set(e.channel, h) } var t = function () { var n = i || this; N(n, "load", t); p.Fn.set(e.channel + "_load", d); (function s() { if (typeof n.contentWindow.sendMessage == "function") { c() } else { r(s, 50) } })() }; i = W({ props: { src: e.local + "#_4" + e.channel }, onLoad: t }) }, init: function () { M(t.onDOMReady, t) } } }; p.stack.HashTransport = function (t) { function d(e) { if (!c) { return } var n = t.remote + "#" + f++ + "_" + e; (s || !h ? c.contentWindow : c).location = n } function m(e) { a = e; n.up.incoming(a.substring(a.indexOf("_") + 1), p) } function g() { if (!l) { return } var e = l.location.href, t = "", n = e.indexOf("#"); if (n != -1) { t = e.substring(n) } if (t && t != a) { m(t) } } function y() { o = setInterval(g, u) } var n; var i = this, s, o, u, a, f, l, c; var h, p; return n = { outgoing: function (e, t) { d(e) }, destroy: function () { e.clearInterval(o); if (s || !h) { c.parentNode.removeChild(c) } c = null }, onDOMReady: function () { s = t.isHost; u = t.interval; a = "#" + t.channel; f = 0; h = t.useParent; p = B(t.remote); if (s) { U(t.props, { src: t.remote, name: v + t.channel + "_provider" }); if (h) { t.onLoad = function () { l = e; y(); n.up.callback(true) } } else { var i = 0, o = t.delay / 50; (function d() { if (++i > o) { throw new Error("Unable to reference listenerwindow") } try { l = c.contentWindow.frames[v + t.channel + "_consumer"] } catch (e) { } if (l) { y(); n.up.callback(true) } else { r(d, 50) } })() } c = W(t) } else { l = e; y(); if (h) { c = parent; n.up.callback(true) } else { U(t, { props: { src: t.remote + "#" + t.channel + new Date, name: v + t.channel + "_consumer" }, onLoad: function () { n.up.callback(true) } }); c = W(t) } } }, init: function () { M(n.onDOMReady, n) } } }; p.stack.ReliableBehavior = function (e) { var t, n; var r = 0, i = 0, s = ""; return t = { incoming: function (e, o) { var u = e.indexOf("_"), a = e.substring(0, u).split(","); e = e.substring(u + 1); if (a[0] == r) { s = ""; if (n) { n(true); n = null } } if (e.length > 0) { t.down.outgoing(a[1] + "," + r + "_" + s, o); if (i != a[1]) { i = a[1]; t.up.incoming(e, o) } } }, outgoing: function (e, o, u) { s = e; n = u; t.down.outgoing(i + "," + ++r + "_" + e, o) } } }; p.stack.QueueBehavior = function (e) { function h() { if (e.remove && n.length === 0) { J(t); return } if (o || n.length === 0 || a) { return } o = true; var i = n.shift(); t.down.outgoing(i.data, i.origin, function (e) { o = false; if (i.callback) { r(function () { i.callback(e) }, 0) } h() }) } var t, n = [], o = true, u = "", a, f = 0, l = false, c = false; return t = { init: function () { if (q(e)) { e = {} } if (e.maxLength) { f = e.maxLength; c = true } if (e.lazy) { l = true } else { t.down.init() } }, callback: function (e) { o = false; var n = t.up; h(); n.callback(e) }, incoming: function (n, r) { if (c) { var s = n.indexOf("_"), o = parseInt(n.substring(0, s), 10); u += n.substring(s + 1); if (o === 0) { if (e.encode) { u = i(u) } t.up.incoming(u, r); u = "" } } else { t.up.incoming(n, r) } }, outgoing: function (r, i, o) { if (e.encode) { r = s(r) } var u = [], a; if (c) { while (r.length !== 0) { a = r.substring(0, f); r = r.substring(a.length); u.push(a) } while (a = u.shift()) { n.push({ data: u.length + "_" + a, origin: i, callback: u.length === 0 ? o : null }) } } else { n.push({ data: r, origin: i, callback: o }) } if (l) { t.down.init() } else { h() } }, destroy: function () { a = true; t.down.destroy() } } }; p.stack.VerifyBehavior = function (e) { function s() { n = Math.random().toString(16).substring(2); t.down.outgoing(n) } var t, n, r, i = false; return t = { incoming: function (i, o) { var u = i.indexOf("_"); if (u === -1) { if (i === n) { t.up.callback(true) } else { if (!r) { r = i; if (!e.initiate) { s() } t.down.outgoing(i) } } } else { if (i.substring(0, u) === r) { t.up.incoming(i.substring(u + 1), o) } } }, outgoing: function (e, r, i) { t.down.outgoing(n + "_" + e, r, i) }, callback: function (t) { if (e.initiate) { s() } } } }; p.stack.RpcBehavior = function (e, t) { function o(e) { e.jsonrpc = "2.0"; n.down.outgoing(r.stringify(e)) } function u(e, t) { var n = Array.prototype.slice; return function () { var r = arguments.length, u, a = { method: t }; if (r > 0 && typeof arguments[r - 1] === "function") { if (r > 1 && typeof arguments[r - 2] === "function") { u = { success: arguments[r - 2], error: arguments[r - 1] }; a.params = n.call(arguments, 0, r - 2) } else { u = { success: arguments[r - 1] }; a.params = n.call(arguments, 0, r - 1) } s["" + ++i] = u; a.id = i } else { a.params = n.call(arguments, 0) } if (e.namedParams && a.params.length === 1) { a.params = a.params[0] } o(a) } } function f(e, t, n, r) { if (!n) { if (t) { o({ id: t, error: { code: -32601, message: "Procedure not found."} }) } return } var i, s; if (t) { i = function (e) { i = a; o({ id: t, result: e }) }; s = function (e, n) { s = a; var r = { id: t, error: { code: -32099, message: e} }; if (n) { r.error.data = n } o(r) } } else { i = s = a } if (!S(r)) { r = [r] } try { var u = n.method.apply(n.scope, r.concat([i, s])); if (!q(u)) { i(u) } } catch (f) { s(f.message) } } var n, r = t.serializer || R(); var i = 0, s = {}; return n = { incoming: function (e, n) { var i = r.parse(e); if (i.method) { if (t.handle) { t.handle(i, o) } else { f(i.method, i.id, t.local[i.method], i.params) } } else { var u = s[i.id]; if (i.error) { if (u.error) { u.error(i.error) } } else { if (u.success) { u.success(i.result) } } delete s[i.id] } }, init: function () { if (t.remote) { for (var r in t.remote) { if (t.remote.hasOwnProperty(r)) { e[r] = u(t.remote[r], r) } } } n.down.init() }, destroy: function () { for (var r in t.remote) { if (t.remote.hasOwnProperty(r) && e.hasOwnProperty(r)) { delete e[r] } } n.down.destroy() } } }; o.easyXDM = p })(window, document, location, window.setTimeout, decodeURIComponent, encodeURIComponent); (function (e, t) { e.ver = "1.0.4"; e.userId = "test.user"; e.apiKey = "c9d525ea08f16a40082d069d30d4a7e92549e4b4"; e.server = "https://phoenix.rwmanila.com/api"; var n = "public", r = "7CE766FE1473813B97C148EB9F7BD49514B9ECD0", i; try { i = new easyXDM.Rpc({ local: "/ie6bridge.html", swf: e.server + "/../Scripts/easyxdm.swf", remote: e.server + "/../cors", remoteHelper: e.server + "/../Scripts/name.html" }, { remote: { request: {}} }) } catch (s) { i = null } e.public = function (i, s) { e.send(i, s, n, r) }; e.send = function (n, r, s, o) { if (!s) s = e.userId; if (!o) o = e.apiKey; var l = (new Date).toUTCString(), c = f(), h = "POST " + l + " " + c + " " + a(e.server), p = u(o, h); if (!i) { var d = new XMLHttpRequest; d.open("POST", e.server, true); d.onreadystatechange = function () { if (this.readyState == XMLHttpRequest.DONE) { if (r) { r(this.responseText) } } }; d.setRequestHeader("Accept", "text/html,application/json;q=0.9,*/*;q=0.8"); d.setRequestHeader("content-type", "application/json"); d.setRequestHeader("Timestamp", l); d.setRequestHeader("Authentication", s + ":" + p); d.setRequestHeader("Random", c); d.send(JSON.stringify(n)) } else { i.request({ url: e.server, method: "POST", headers: { Accept: "text/html,application/json;q=0.9,*/*;q=0.8", "Content-Type": "application/json", Timestamp: l, Authentication: s + ":" + p, Random: c }, data: JSON.stringify(n) }, function (t) { if (r) { r(t.data) } }) } }; var o = function (t) { return t.replace(/^\s+|\s+$/g, "") }; var u = function (t, n) { return CryptoJS.enc.Base64.stringify(CryptoJS.HmacSHA256(n, t.toUpperCase())) }; var a = function (t) { var n, r = document.createElement("a"); r.href = t; n = r.pathname; if (n.charAt(0) !== "/") n = "/" + n; return o(n) }; var f = function () { var t = (new Date).getTime(); var n = "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function (e) { var n = (t + Math.random() * 16) % 16 | 0; t = Math.floor(t / 16); return (e == "x" ? n : n & 7 | 8).toString(16) }); return n } })(window.phoenix = window.phoenix || {})